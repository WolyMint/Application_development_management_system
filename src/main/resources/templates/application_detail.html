<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${project.title}">Название приложения</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
<h2 th:text="${project.title}">Название приложения</h2>
<p th:text="${project.description}">Описание приложения</p>

<h4>Подзадачи</h4>
<ul class="list-group mb-3">
    <li th:each="subtask : ${project.subtasks}" class="list-group-item d-flex justify-content-between align-items-center">
        <div>
            <p class="mb-1" th:text="${subtask.title}">Название подзадачи</p>
            <small th:text="'Статус: ' + (${subtask.completed} ? '✅ Выполнено' : '⏳ В процессе')">Статус</small><br/>
            <span th:if="${subtask.assignedUser != null}" th:text="'Исполнитель: ' + ${subtask.assignedUser.login}">Исполнитель</span>
        </div>
        <div>
            <form th:action="@{'/subtask/assign/' + ${subtask.id}}" method="post" th:if="${subtask.assignedUser == null}">
                <button type="submit" class="btn btn-success btn-sm">Взять в работу</button>
            </form>
        </div>
    </li>
</ul>

<!-- Форма добавления подзадачи -->
<form th:action="@{'/subtasks/create/' + ${project.id}}" method="post" class="mb-3">
    <input type="text" name="title" class="form-control" placeholder="Название подзадачи" required>
    <button type="submit" class="btn btn-primary mt-2">Добавить подзадачу</button>
</form>
</body>
</html>
